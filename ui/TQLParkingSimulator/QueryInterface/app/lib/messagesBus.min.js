var messageBusModule=angular.module("messageBusModule",[]);messageBusModule.constant("messagesBusConstants",{apiVersion:"1.0.0"});messageBusModule.factory("messagesBusService",["$rootScope","$log","messagesBusConstants",function(e,t,n){var r=[];return{apiVersion:function(){t.debug("IN messagesBusService.apiVersion.");return n.apiVersion},registry:function(){t.debug("IN messagesBusService.registry.");return r},register:function(e,n){t.debug("IN messagesBusService.register.");var i=this.getEvent(e,true);if(!this.getSubscriber(i,n.name)){i.subscribers.push(n)}else{t.debug("Subscriber: "+n.name+" is already registered on event: "+e)}t.debug("Registry content is: "+angular.toJson(r))},unregister:function(e,n){t.debug("IN messagesBusService.unregister.");var i=this.getEvent(e,false);if(i){var s=this.getSubscriber(i,n);if(!s){t.debug("Subscriber: "+n+" is not registered on event: "+e)}else{i.subscribers=i.subscribers.filter(function(e){return e.name!=n})}}t.debug("Registry content is: "+angular.toJson(r))},publish:function(e,n){t.debug("IN messagesBusService.publish.");var i=this.getEvent(e,false);if(i){i.subscribers.forEach(function(e){t.debug("Invoking subscriber: "+e.name);if(e.handler){e.handler(n)}})}t.debug("Registry content is: "+angular.toJson(r))},getEvent:function(e,n){t.debug("IN messagesBusService.getEvent.");var i=$.grep(r,function(t){return t.eventName==e});var s=i.length>0?i[0]:null;if(!s&&n){s={eventName:e,subscribers:[]};r.push(s)}return s},getSubscriber:function(e,n){t.debug("IN messagesBusService.getSubscriber.");var r=$.grep(e.subscribers,function(e){return e.name==n});return r.length>0?r[0]:null}}}])